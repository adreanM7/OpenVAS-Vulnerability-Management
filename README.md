# Vulnerablility Management Using OpenVAS & Azure

![OpenVAS_Vulnerability Managment Lab](https://github.com/user-attachments/assets/7dc720bd-5a2a-4f48-a7f6-875ad5b7574e)


## Introduction

In this project, I created a Full Techincal vulnerablility Management in the cloud. First creating a Virtual Machine in Microsoft Azure. I installed Insecure software on the VM to see how many vulnerablility it would create. once downloaded I Then create a vulnerablility Management server using OpenVAS, I w 

- SecurityEvent (Windows Event Logs)
- Syslog (Linux Event Logs)
- SecurityAlert (Log Analytics Alerts Triggered)
- SecurityIncident (Incidents created by Sentinel)
- AzureNetworkAnalytics_CL (Malicious Flows allowed into our honeynet)

## Create our Free Azure Account
<img width="720" alt="Screen Shot 2024-07-18 at 3 41 46 PM" src="https://github.com/user-attachments/assets/ff2a398e-2165-4b47-86a8-237f796dbf30">

1. Sign up for Azure Account
2. Login to Azure Portal

## Prepare Vulnerability Management Scanner
<img width="207" alt="Screen Shot 2024-07-17 at 10 39 31 AM" src="https://github.com/user-attachments/assets/0587aa3e-36f3-4d56-a162-61bc4799d219">


1. Go to Azure Portal 
2. Navigate to the Marketplace and search for “OpenVAS secured and supported by HOSSTED”
3. Choose the “Start with a pre-set configuration” option and select the weakest one
4. Cleck “Continue to Create VM”
5. Configure the VM
   - Resource Group: Vulnerability-Management
   - VM Name: OpenVAS (Take note of the region and Vnet–consider East US 2)
   - Authentication: Username → Created Username / Created Password
   - Monitoring: Disable Boot Diagnostic (don’t need it)
6. Click Create → Create
7. Once the VM has been created, SSH into it With PowerShell (windows) or Terminal (MacOS) using the credentials you created earlier
8. Don’t touch anything, you’ll notice the “Your openvas is deploying, please wait”
   - Wait until it says “hossted stage done”  
<img width="554" alt="Screen Shot 2024-07-19 at 9 21 59 PM" src="https://github.com/user-attachments/assets/f1ad72fc-aea7-4d90-bfa0-3c9014f1f959">

   - It should show the web app URL and default username and password at this point, attempt to go to the URL in the browser and login with the username and password. If it doesn’t work, try admin/admin:
<img width="586" alt="Screen Shot 2024-07-19 at 9 22 21 PM" src="https://github.com/user-attachments/assets/30c1f9c3-12c8-41bd-b05b-af0355c319a4">


   - For the "AFTER" metrics, Network Security Groups were hardened by blocking ALL traffic with the exception of my admin workstation, and all other resources were protected by their built-in firewalls as well as Private Endpoint

## Create Client Virtual Machine and Make it Vulnerable
https://portal.azure.com/
Search for Virtual Machines and create a new Virtual Machine
Resource Group: Vulnerability-Management
VM Name: Win10-Vulnerable
Region: Same as the OpenVAS VM (East US 2)
Virtual Network: Same as OpenVAS (this is important)
Image: Windows 10 Pro
Size: Any size with 2 vCPUs
Username: azureuser / Cyberlab123!
Networking: Same Vnet as OpenVAS
Create the VM
After the VM has been created, ensure you can RDP into it with the credentials you created.
After logging in, make the VM vulnerable:
Disable the Windows Firewall
Old Software
Install an Old Version of FireFox: Firefox Setup 97.0b5
Install an Old Version of VLC Player: vlc-1.1.7-win32
Install an Old Version of Adobe Reader: 10.0_AdbeRdr1000_en_US_1_
Restart the VM
Leave the VM for now


## Configure and OpenVAS to Perform First Unauthenticated Scan against our Vulnerable VM

Login to OpenVAS → Assets → Hosts → New Host
Add the Client VM PRIVATE IP Address
Create a New Target from the Host, name it “Azure Vulnerable VMs”.
Take note of the credentials. We will add SMB credentials later.
Create a new Task
Name & Comment: “Scan - Azure Vulnerable VMs”
Scan Targets → “Azure Vulnerable VMs”
Save the Task
“Start” the “Scan - Azure Vulnerable VMs” Task
Take note of the Status:




## Make Configurations for Credentialed Scans (Within VM)

```All map queries actually returned no results due to no instances of malicious activity for the 24 hour period after hardening.```

## Make Configurations for Credentialed Scans (OpenVAS)

The following table shows the metrics we measured in our environment for another 24 hours, but after we have applied security controls:
Start Time 2023-03-18 15:37
Stop Time	2023-03-19 15:37



## Execute Credentialed Scan against our Vulnerable Windows VM

In this project, a mini honeynet was constructed in Microsoft Azure and log sources were integrated into a Log Analytics workspace. Microsoft Sentinel was employed to trigger alerts and create incidents based on the ingested logs. Additionally, metrics were measured in the insecure environment before security controls were applied, and then again after implementing security measures. It is noteworthy that the number of security events and incidents were drastically reduced after the security controls were applied, demonstrating their effectiveness.

It is worth noting that if the resources within the network were heavily utilized by regular users, it is likely that more security events and alerts may have been generated within the 24-hour period following the implementation of the security controls.
## Remediate Vulnerabilities


## Verify Remediations
